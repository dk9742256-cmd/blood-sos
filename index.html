<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 7.3.7.2 (Linux)"/>
	<meta name="created" content="2025-08-16T17:49:57.517746438"/>
	<meta name="changed" content="2025-08-16T17:50:23.924973356"/>
	<style type="text/css">
		@page { size: 21cm 29.7cm; margin: 2cm }
		p { line-height: 115%; margin-bottom: 0.25cm; background: transparent }
	</style>
</head>
<body lang="en-IN" link="#000080" vlink="#800000" dir="ltr"><p style="line-height: 100%; margin-bottom: 0cm">
&lt;!doctype html&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">&lt;html&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">&lt;head&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;meta
charset=&quot;utf-8&quot;/&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;meta
name=&quot;viewport&quot;
content=&quot;width=device-width,initial-scale=1&quot;/&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;title&gt;BloodLink
SOS — Request&lt;/title&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;style&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
body{font-family:Arial;margin:24px;max-width:700px}</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
label{display:block;margin-top:10px}</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
input,select,textarea{width:100%;padding:8px;margin-top:6px}</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
button{background:#d32;color:#fff;padding:10px
14px;border:none;border-radius:6px;margin-top:12px}</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
.hint{font-size:0.9em;color:#555}</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;/style&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">&lt;/head&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">&lt;body&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;h1&gt;⚕️
BloodLink SOS — Request Blood&lt;/h1&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;p
class=&quot;hint&quot;&gt;No signup — just fill details and allow
location access so nearby donors can be notified.&lt;/p&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;form
id=&quot;sosForm&quot;&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;label&gt;Patient
/ Name</p>
<p style="line-height: 100%; margin-bottom: 0cm">      &lt;input
name=&quot;patientName&quot; required /&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;/label&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;label&gt;Contact
phone (include country code, e.g. +91XXXXXXXXXX)</p>
<p style="line-height: 100%; margin-bottom: 0cm">      &lt;input
name=&quot;phone&quot; pattern=&quot;^\\+?\\d{7,15}$&quot; required
/&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;/label&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;label&gt;Blood
Group</p>
<p style="line-height: 100%; margin-bottom: 0cm">      &lt;select
name=&quot;bloodGroup&quot; required&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">       
&lt;option&gt;O+&lt;/option&gt;&lt;option&gt;O-&lt;/option&gt;&lt;option&gt;A+&lt;/option&gt;&lt;option&gt;A-&lt;/option&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">       
&lt;option&gt;B+&lt;/option&gt;&lt;option&gt;B-&lt;/option&gt;&lt;option&gt;AB+&lt;/option&gt;&lt;option&gt;AB-&lt;/option&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">      &lt;/select&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;/label&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;label&gt;Location
/ Landmark</p>
<p style="line-height: 100%; margin-bottom: 0cm">      &lt;input
name=&quot;locationText&quot; placeholder=&quot;Hospital name or
landmark&quot; required /&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;/label&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
&lt;label&gt;Additional notes</p>
<p style="line-height: 100%; margin-bottom: 0cm">      &lt;textarea
name=&quot;notes&quot;&gt;&lt;/textarea&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;/label&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;div
id=&quot;locStatus&quot; class=&quot;hint&quot;&gt;Click below to add
your approximate location (required)&lt;/div&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    &lt;button
type=&quot;button&quot; id=&quot;getLoc&quot;&gt;Add my location &amp;
submit&lt;/button&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;/form&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">  &lt;div
id=&quot;result&quot;&gt;&lt;/div&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">&lt;script&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">const webAppUrl =
'YOUR_WEBAPP_URL'; // &lt;-- paste the Apps Script web app URL here</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">document.getElementById('getLoc').addEventListener('click',
async ()=&gt;{</p>
<p style="line-height: 100%; margin-bottom: 0cm">  const form =
document.getElementById('sosForm');</p>
<p style="line-height: 100%; margin-bottom: 0cm">  if
(!form.reportValidity()) return;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">  const status =
document.getElementById('locStatus');</p>
<p style="line-height: 100%; margin-bottom: 0cm">  status.textContent
= 'Requesting location from your browser... (allow location)';</p>
<p style="line-height: 100%; margin-bottom: 0cm">  if
(!navigator.geolocation) {</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
status.textContent = 'Geolocation not supported. Please enter
Latitude &amp; Longitude manually.';</p>
<p style="line-height: 100%; margin-bottom: 0cm">    return;</p>
<p style="line-height: 100%; margin-bottom: 0cm">  }</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"> 
navigator.geolocation.getCurrentPosition(async pos =&gt; {</p>
<p style="line-height: 100%; margin-bottom: 0cm">    const lat =
pos.coords.latitude;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    const lon =
pos.coords.longitude;</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
status.textContent = `Location captured (lat: ${lat.toFixed(5)}, lon:
${lon.toFixed(5)}) — sending...`;</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">    // collect form
data</p>
<p style="line-height: 100%; margin-bottom: 0cm">    const fd = new
FormData(form);</p>
<p style="line-height: 100%; margin-bottom: 0cm">    const data = {</p>
<p style="line-height: 100%; margin-bottom: 0cm">      patientName:
fd.get('patientName'),</p>
<p style="line-height: 100%; margin-bottom: 0cm">      phone:
fd.get('phone'),</p>
<p style="line-height: 100%; margin-bottom: 0cm">      bloodGroup:
fd.get('bloodGroup'),</p>
<p style="line-height: 100%; margin-bottom: 0cm">      locationText:
fd.get('locationText'),</p>
<p style="line-height: 100%; margin-bottom: 0cm">      notes:
fd.get('notes'),</p>
<p style="line-height: 100%; margin-bottom: 0cm">      lat: lat,</p>
<p style="line-height: 100%; margin-bottom: 0cm">      lon: lon</p>
<p style="line-height: 100%; margin-bottom: 0cm">    };</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">    try {</p>
<p style="line-height: 100%; margin-bottom: 0cm">      const res =
await fetch(webAppUrl, {</p>
<p style="line-height: 100%; margin-bottom: 0cm">        method:
'POST',</p>
<p style="line-height: 100%; margin-bottom: 0cm">        mode:
'cors',</p>
<p style="line-height: 100%; margin-bottom: 0cm">        headers:
{'Content-Type':'application/json'},</p>
<p style="line-height: 100%; margin-bottom: 0cm">        body:
JSON.stringify(data)</p>
<p style="line-height: 100%; margin-bottom: 0cm">      });</p>
<p style="line-height: 100%; margin-bottom: 0cm">      const j =
await res.json();</p>
<p style="line-height: 100%; margin-bottom: 0cm">      if (j.status
=== 'ok') {</p>
<p style="line-height: 100%; margin-bottom: 0cm">       
document.getElementById('result').innerHTML = `&lt;p
style=&quot;color:green&quot;&gt;Alert sent to ${j.notifiedCount}
donors (or queued). Share this link so others can help.&lt;/p&gt;`;</p>
<p style="line-height: 100%; margin-bottom: 0cm">      } else if
(j.status === 'no_coords') {</p>
<p style="line-height: 100%; margin-bottom: 0cm">       
document.getElementById('result').innerHTML = `&lt;p
style=&quot;color:orange&quot;&gt;Could not get coordinates. Please
add coordinates manually.&lt;/p&gt;`;</p>
<p style="line-height: 100%; margin-bottom: 0cm">      } else {</p>
<p style="line-height: 100%; margin-bottom: 0cm">       
document.getElementById('result').innerHTML = `&lt;p
style=&quot;color:red&quot;&gt;Error: ${j.message || 'unknown'}&lt;/p&gt;`;</p>
<p style="line-height: 100%; margin-bottom: 0cm">      }</p>
<p style="line-height: 100%; margin-bottom: 0cm">    } catch (err) {</p>
<p style="line-height: 100%; margin-bottom: 0cm">     
document.getElementById('result').innerHTML = `&lt;p
style=&quot;color:red&quot;&gt;Network error: ${err}&lt;/p&gt;`;</p>
<p style="line-height: 100%; margin-bottom: 0cm">    }</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">  }, err =&gt; {</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
document.getElementById('locStatus').textContent = 'Location denied
or failed. Please allow location or enter lat/lon manually.';</p>
<p style="line-height: 100%; margin-bottom: 0cm">  },
{enableHighAccuracy:true, timeout:10000});</p>
<p style="line-height: 100%; margin-bottom: 0cm">});</p>
<p style="line-height: 100%; margin-bottom: 0cm">&lt;/script&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">&lt;/body&gt;</p>
<p style="line-height: 100%; margin-bottom: 0cm">&lt;/html&gt;</p>
</body>
</html>